<% uri = URI.parse(source["url"]) %>

<% addr = "//logo.clearbit.com/#{uri.to_s[/https?:\/\/(www.)?.+.(com|net|co.uk|\w{2}\/)/]}" %>

<!--
  <%#= Dir.glob('app/assets/images/cover-images/*').map do |path| %>
  <%# content_tag(:div, class: "center", style: 'background: asset-url("#{path}") ; height: 150px ; width: 150px;' ) %>
  <div class="center" style="background: url(<%#= asset_path path %>) center / cover"></div>
  <%# image_tag "cover-images/#{ File.basename(path) }" %>
  <%# end.reduce(&:+) %>


<div class="publication-card mdl-shadow--4dp" style="background: url(<%#= addr %>) center no-repeat">
  <label class="mdl-icon-toggle mdl-js-icon-toggle mdl-js-ripple-effect" for="icon-toggle-<%#= source["id"] %>">
  <input type="checkbox" id="icon-toggle-<%#= source["id"] %>" name="<%#= source["id"] %>" class="mdl-icon-toggle__input">
  <i class="mdl-icon-toggle__label material-icons">star</i>
</label> -->

<!-- Event card -->
<style>
.demo-card-event.mdl-card {
  width: 251px;
  height: 380px;
  background: white;
  margin: 10px;
  align-items: center;
  margin-top: 20px;
}
.demo-card-event > .mdl-card__actions {
  border-color: rgba(255, 255, 255, 0.2);
}
.demo-card-event > .mdl-card__title {
  align-items: flex-start;
}
.demo-card-event > .mdl-card__title > h4 {
  margin-top: 0;
}
.demo-card-event > .mdl-card__actions {
  display: flex;
  box-sizing:border-box;
  align-items: center;
}
.demo-card-event > .mdl-card__actions > .material-icons {
  padding-right: 10px;
}
.demo-card-event > .mdl-card__title,
.demo-card-event > .mdl-card__actions,
.demo-card-event > .mdl-card__actions > .mdl-button {
  color: #333333;
}
.mdl-card__title {
  color: #333333!important;
  font-weight: bold;
}
.background-center {
  width:100%;
  height:100%;
  background: center/cover;
}
.mdl-icon-toggle__label.material-icons {
    font-size: 85px;
    top: 147px;
    left: 88px;
    color: #F9F9F9;
}
.mdl-button--colored {
  color: #333333 !important;
}
.mdl-icon-toggle.is-checked .mdl-icon-toggle__label{
  color: #C137FC !important;
}
.opacity label {
  background-color: rgba(93, 168, 239, 0.7);
}
.mdl-icon-toggle {
 transition: 0.5s all ease-in;
}
</style>


<% asset_present = Dir.glob('app/assets/images/cover-images/*').any? {|path| path.include?(source['name'])} %>
<% asset_name = asset_present ? "cover-images/#{source['name']}.jpg" : "cover-images/default.jpg" %>

<div class="demo-card-event mdl-card mdl-shadow--2dp" >
    <div class="background-center" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= image_path(asset_name) %>')">
    <div class="opacity">
       <label class="mdl-icon-toggle mdl-js-icon-toggle mdl-js-ripple-effect" for="icon-toggle-<%= source["id"] %>">
      <input type="checkbox" id="icon-toggle-<%= source["id"] %>" name="<%= source["id"] %>" class="mdl-icon-toggle__input">
      <i class="mdl-icon-toggle__label material-icons">check</i>
    </label>
    </div>
  </div>
  <div class="mdl-card__actions mdl-card--border">
    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
      <%= source["name"] %>
    </a>
    <div class="mdl-layout-spacer"></div>
  </div>
</div>
